#!/bin/bash

set -eo pipefail

declare -a versions=(
  2.12.1
  2.11.8
)

for version in "${versions[@]}"
do
  rm -rf "$version"
  mkdir "$version"

  cat > "$version/Dockerfile" <<-END
# Generated by "..."
# Do no edit this file

FROM openjdk:8-jdk

ENV SCALA_VERSION ${version}
ENV SCALA_PACKAGE scala-\${SCALA_VERSION}.deb

WORKDIR /tmp

# scala installation
RUN wget --quiet "http://www.scala-lang.org/files/archive/\${SCALA_PACKAGE}" && \\
    dpkg --install \${SCALA_PACKAGE}

RUN apt-get clean && \\
    rm -rf /var/lib/apt/lists/*

RUN rm -rf /tmp/*

VOLUME /app
WORKDIR /app
END

done
